# 分析模型

## 1.1 概念类图

### 1.1.11 用户购买周边需求的概念类图

![周边概念类图.drawio](./img/周边概念类图.drawio.png)

用户可以查看商品信息，可以发起订单，订单可以获取用户地址信息，并且作用于商品，用户也可以与商家联系

## 1.2 详细用例的顺序图和状态图

### 1.2.11 购买周边

![周边顺序图.drawio](./img/周边顺序图.drawio.png)

用户可以查看商品，系统返回商品信息，用户选择购买商品，并填写地址信息，系统创建订单并返回订单信息，如果用户取消订单，则返回购买也页面，如继续支付则系统返回支付结果并更新商品的数据库

![周边状态图.drawio](./img/周边状态图.drawio.png)

首先是空闲状态，点击查看商品进入查看信息状态，取消则返回空闲状态看，点击购买商品进入订单创建状态，点击取消订单则返回查看状态，点击支付订单进入支付状态，取消支付则返回空闲状态，支付成功则完成后退出

# 软件需求规格说明

## 2.1 引言

本文档描述了自游的功能需求和非功能需求。开发小组的软件系统实现与验证工作以此文档为依据。

### 2.1.1 目的

提供一个多终端互联的平台，与绝大多数景区相互关联，定制化旅游路线和旅游讲解，提供景区内导航系统和周边的线上购买功能，还提供了一个用户友好的社区，并且集成了其他出行软件中绝大多数功能，方便用户预定旅游期间的餐饮和住宿，以便利游客旅游时的使用和之后的交流。

### 2.1.2 范围

我们的软件可以做到多景点覆盖，并且提供给用户一个定制化旅游路线的功能、预定餐饮和住宿的功能和一个讨论的的社区，并且允许用户分享自己的定制和旅游经历。最后景区还可以使用我们的软件进行导游的预定和导游服务的定制。

### 2.1.3 参考文献

骆斌、丁⼆⽟，《需求⼯程——软件建模与分析》，北京：⾼等教育出版社，2009.

## 2.2 详细需求描述

### 2.2.1 对外接口描述

#### 2.2.1.1 用户界面

* UI11 用户购买周边页面：系统应该使用瀑布流风格页面，帮助用户浏览想要购买的商品

  * UI11.1 用户选择查看商品，系统显示一个商品信息页面

    * UI11.1.1 用户选择购买商品，系统显示一个订单信息
      * UI11.1.1.1 用户选择取消订单，返回11.1
      * UI11.1.1.2 用户选择支付订单，显示支付结果，之后返回UI11.1

    * UI11.1.2 用户退出查看商品，系统返回11

#### 2.3.2 功能描述

#### 2.3.2.11 购买周边

##### 2.3.2.11.1 刺激/相应序列

刺激：用户点击周边商品按钮

响应：系统显示商品详细信息

刺激：用户点击商品购买按钮

响应：系统弹出订单信息

刺激：用户点击支付订单按钮

响应：系统收到金额后显示购买成功

刺激：用户付款方式支付失败

响应：系统提示支付失败

##### 2.3.2.11.2 相关功能需求

| Commodity.Show                     | 系统返回商品详细信息                       |
| ---------------------------------- | ------------------------------------------ |
| **Commodity.CreateOrder**          | **系统创建订单信息**                       |
| **CommodityOrder.setCustomerInfo** | **系统在订单信息中填入用户信息**           |
| **CommodityOrder.Pay**             | **系统返回订单的支付框**                   |
| **CommodityOrder.Complete**        | **系统将订单状态改为已支付并提示支付成功** |
| **CommodityOrder.Error**           | **系统返回支付失败信息**                   |
|                                    |                                            |

#### 2.3.3 非功能需求

##### 2.3.3.1 安全性

Safety1: 系统要根据不同的⽤户身份设置不同的访问权限 

Safety2: 系统要防⽌数据在传输过程中被窃取和破解 

Safety3: ⽤户的所有信息都要加密存储

Safety4: 系统不能有超级管理员

Safety5: ⽤户的数据不能未经授权泄漏给任何第三⽅ 

Safety6: 系统要建⽴防⽕墙

Safety7: 系统要防止泄露合作商家信息

Safety7: 系统要防止与恶意平台的合作和进入不安全网页的链接
