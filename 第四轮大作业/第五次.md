# 分析模型

## 1.1 概念类图

### 1.1.11 用户购买周边需求的概念类图

![周边概念类图.drawio](./img/周边概念类图.drawio.png)

用户可以查看商品信息，可以发起订单，订单可以获取用户地址信息，并且作用于商品，用户也可以与商家联系

## 1.2 详细用例的顺序图和状态图

### 1.2.11 购买周边

![周边顺序图.drawio](./img/周边顺序图.drawio.png)

用户可以查看商品，系统返回商品信息，用户选择购买商品，并填写地址信息，系统创建订单并返回订单信息，如果用户取消订单，则返回购买也页面，如继续支付则系统返回支付结果并更新商品的数据库

![周边状态图.drawio](./img/周边状态图.drawio.png)

首先是空闲状态，点击查看商品进入查看信息状态，取消则返回空闲状态看，点击购买商品进入订单创建状态，点击取消订单则返回查看状态，点击支付订单进入支付状态，取消支付则返回空闲状态，支付成功则完成后退出

# 软件需求规格说明

## 2.2 详细需求描述

### 2.2.1 对外接口描述

#### 2.2.1.1 用户界面

* UI11 用户购买周边页面：系统应该使用瀑布流风格页面，帮助用户浏览想要购买的商品

  * UI11.1 用户选择查看商品，系统显示一个商品信息页面

    * UI11.1.1 用户选择购买商品，系统显示一个订单信息
      * UI11.1.1.1 用户选择取消订单，返回11.1
      * UI11.1.1.2 用户选择支付订单，显示支付结果，之后返回UI11.1

    * UI11.1.2 用户退出查看商品，系统返回11

#### 2.3.2 功能描述

#### 2.3.2.11 购买周边

##### 2.3.2.11.1 刺激/相应序列

刺激：用户点击周边商品按钮

响应：系统显示商品详细信息

刺激：用户点击商品购买按钮

响应：系统弹出订单信息

刺激：用户点击支付订单按钮

响应：系统收到金额后显示购买成功

刺激：用户付款方式支付失败

响应：系统提示支付失败

##### 2.3.2.11.2 相关功能需求

| Commodity.Show                     | 系统返回商品详细信息                       |
| ---------------------------------- | ------------------------------------------ |
| **Commodity.CreateOrder**          | **系统创建订单信息**                       |
| **CommodityOrder.setCustomerInfo** | **系统在订单信息中填入用户信息**           |
| **CommodityOrder.Pay**             | **系统返回订单的支付框**                   |
| **CommodityOrder.Complete**        | **系统将订单状态改为已支付并提示支付成功** |
| **CommodityOrder.Error**           | **系统返回支付失败信息**                   |
|                                    |                                            |

